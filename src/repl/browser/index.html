<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CRDTBase Browser REPL</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <main class="shell">
      <header class="header">
        <h1>CRDTBase Browser REPL</h1>
        <p>Black-and-white SQL REPL for CRDTBase replication clients.</p>
      </header>

      <section class="panel" id="config-panel">
        <h2>Connection</h2>
        <div class="grid">
          <label>
            Backend
            <select id="backend">
              <option value="http">HTTP</option>
              <option value="s3">S3 (Direct Credentials)</option>
            </select>
          </label>
          <label>
            Site ID
            <input id="site-id" value="browser-site" />
          </label>
        </div>

        <div id="http-fields" class="grid">
          <label class="wide">
            HTTP Base URL
            <input id="http-base-url" value="http://127.0.0.1:8788" />
          </label>
        </div>

        <div id="s3-fields" class="grid hidden">
          <label class="wide">
            S3 Config (JSON or KEY=value pairs)
            <textarea
              id="s3-config"
              rows="7"
              spellcheck="false"
            >{
  "bucket": "crdtbase",
  "prefix": "deltas",
  "endpoint": "http://127.0.0.1:9000",
  "region": "us-east-1",
  "accessKeyId": "minioadmin",
  "secretAccessKey": "minioadmin",
  "forcePathStyle": true
}</textarea>
          </label>
          <p class="wide">
            Accepts either JSON object or loose KEY=value tokens (whitespace-separated). Example:
            <code>bucket=crdtbase endpoint=http://127.0.0.1:9000 accessKeyId=minioadmin secretAccessKey=minioadmin forcePathStyle=true</code>
          </p>
        </div>

        <div class="actions">
          <button id="connect-btn" class="primary">Connect</button>
          <span id="status">Disconnected</span>
        </div>
      </section>

      <section class="panel" id="repl-panel">
        <h2>REPL</h2>
        <textarea id="sql-input" rows="6" placeholder="Type SQL here..."></textarea>
        <div class="actions">
          <button id="run-btn" class="primary" disabled>Run SQL</button>
          <button id="push-btn" disabled>.push</button>
          <button id="pull-btn" disabled>.pull</button>
          <button id="sync-btn" disabled>.sync</button>
        </div>

        <div class="examples">
          <strong>Examples:</strong>
          <ul id="example-list"></ul>
        </div>
      </section>

      <section class="panel">
        <h2>Output</h2>
        <pre id="output" class="mono"></pre>
      </section>
    </main>

    <script type="module" src="/app.js"></script>
  </body>
</html>
